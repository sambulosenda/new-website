---
import Layout from '../../layouts/Layout.astro';
const posts = await Astro.glob('./*.{md,mdx}');

const sortedPosts = posts.sort((a, b) => {
  return new Date(b.frontmatter.date).valueOf() - new Date(a.frontmatter.date).valueOf();
});
---

<Layout title="Blog â€” Sambulo Senda">
  <main>
    <section class="pt-36 pb-20 sm:pt-44">
      <div class="max-w-3xl mx-auto px-4 sm:px-6">

        <header class="mb-12">
          <h1 class="text-2xl sm:text-3xl font-bold text-ink tracking-tight mb-3">Blog</h1>
          <p class="text-ink-muted">Articles about React Native and mobile development.</p>
        </header>

        <div class="space-y-1">
          {sortedPosts.map(post => (
            <a href={post.url} class="group flex items-start justify-between gap-4 py-4 px-3 -mx-3 rounded-lg hover:bg-surface transition-colors">
              <div class="flex-1 min-w-0">
                <h2 class="font-medium text-ink group-hover:text-accent transition-colors mb-1">
                  {post.frontmatter.title}
                </h2>
                {post.frontmatter.description && (
                  <p class="text-sm text-ink-faint line-clamp-1">{post.frontmatter.description}</p>
                )}
                {post.frontmatter.tags && (
                  <div class="flex flex-wrap gap-1.5 mt-2">
                    {post.frontmatter.tags.map((tag: string) => (
                      <span class="text-xs px-2 py-0.5 rounded-md bg-surface-subtle text-ink-faint">{tag}</span>
                    ))}
                  </div>
                )}
              </div>
              <time datetime={post.frontmatter.date} class="text-xs text-ink-faint whitespace-nowrap shrink-0 font-mono mt-1">
                {new Date(post.frontmatter.date).toLocaleDateString('en-US', {
                  month: 'short',
                  day: 'numeric',
                  year: 'numeric'
                })}
              </time>
            </a>
          ))}
        </div>

        {sortedPosts.length === 0 && (
          <p class="text-center text-ink-faint py-12">No posts yet.</p>
        )}

      </div>
    </section>

    <footer class="border-t border-border py-12">
      <div class="max-w-3xl mx-auto px-4 sm:px-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 text-sm text-ink-muted">
        <span>&copy; {new Date().getFullYear()} sambulo.dev</span>
        <a href="mailto:sambulosenda@gmail.com" class="hover:text-ink transition-colors">sambulosenda@gmail.com</a>
      </div>
    </footer>
  </main>
</Layout>
