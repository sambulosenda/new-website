---
import { findSeries } from '../data/series';

interface Props {
  currentSlug: string;
}

const { currentSlug } = Astro.props;
const result = findSeries(currentSlug);
---

{result && (
  <div class="max-w-3xl mx-auto px-4 sm:px-6 mb-8">
    <div class="bg-surface rounded-xl border border-border p-5">
      <div class="flex items-center gap-2 mb-3">
        <svg class="w-4 h-4 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
        </svg>
        <span class="text-sm font-medium text-ink">
          {result.series.name}
        </span>
        <span class="text-xs text-ink-faint">
          Part {result.index + 1} of {result.series.slugs.length}
        </span>
      </div>

      <div class="space-y-1">
        {result.series.slugs.map((slug, i) => (
          <a
            href={`/blog/${slug}`}
            class:list={[
              'block text-sm py-1 px-2 rounded transition-colors',
              slug === currentSlug
                ? 'bg-accent-subtle text-accent font-medium'
                : 'text-ink-muted hover:text-ink hover:bg-surface-subtle',
            ]}
          >
            {i + 1}. {slug.replace(/-/g, ' ').replace(/\b\w/g, c => c.toUpperCase())}
          </a>
        ))}
      </div>

      {(result.prev || result.next) && (
        <div class="flex justify-between mt-4 pt-3 border-t border-border">
          {result.prev ? (
            <a href={`/blog/${result.prev}`} class="text-sm text-accent hover:underline">
              &larr; Previous
            </a>
          ) : <span />}
          {result.next ? (
            <a href={`/blog/${result.next}`} class="text-sm text-accent hover:underline">
              Next &rarr;
            </a>
          ) : <span />}
        </div>
      )}
    </div>
  </div>
)}
